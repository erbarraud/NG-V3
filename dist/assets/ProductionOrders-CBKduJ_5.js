import{_ as K,a as _}from"./index-DMU_U8j6.js";import{_ as w,a as D}from"./card-content.vue_vue_type_script_setup_true_lang-BUO1Kpj1.js";import{_ as O}from"./badge.vue_vue_type_script_setup_true_lang-D2wh-i_4.js";import{l as I,Z as B,m as T,k,U as F,C as J,P as U,n as $,o as G,p as M,q as V,r as q,s as L,u as W}from"./ui-C3Nfw3T3.js";import{r as f,c as P,o as z,g as v,q as t,y as s,A as o,C as H,B as n,u as d,D as p,z as a,x as Z,I as Q,J as X,k as c,E as Y}from"./vendor-BU-5murH.js";const tt={class:"w-full px-4 sm:px-6 lg:px-8 py-6"},et={class:"flex items-center justify-between mb-8"},st={class:"flex items-center space-x-4"},at={class:"mb-8"},rt={class:"flex items-center justify-between mb-6"},lt={class:"text-2xl font-bold text-gray-900 flex items-center mb-2"},ot={class:"text-sm text-gray-500"},dt={class:"grid grid-cols-3 gap-8 mb-8"},it={class:"flex items-center mb-2"},nt={class:"text-base font-medium text-gray-900"},ct={class:"flex items-center mb-2"},ut={class:"text-base font-medium text-gray-900"},xt={class:"flex items-center mb-2"},mt={class:"text-base font-medium text-gray-900"},gt={class:"grid grid-cols-4 gap-6 mb-8"},_t={class:"flex items-center"},ft={class:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center mr-3"},vt={class:"text-xl font-bold text-gray-900"},pt={class:"flex items-center"},yt={class:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center mr-3"},ht={class:"text-xl font-bold text-gray-900"},bt={class:"flex items-center"},St={class:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3"},wt={class:"text-xl font-bold text-gray-900"},Dt={class:"flex items-center"},Ot={class:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3"},kt={class:"text-xl font-bold text-gray-900"},Mt={class:"flex justify-end"},Pt={class:"flex items-center justify-between mb-6"},Ct={class:"text-2xl font-bold text-gray-900"},At={key:0,class:"bg-white shadow rounded-lg p-8 text-center"},Nt={key:1,class:"bg-white shadow rounded-lg overflow-hidden"},Rt={class:"min-w-full divide-y divide-gray-200"},Et={class:"bg-white divide-y divide-gray-200"},jt=["onDragstart","onDragover","onDrop"],Kt={class:"px-6 py-4 whitespace-nowrap"},It={class:"flex items-center space-x-2"},Bt={class:"drag-handle flex items-center justify-center w-6 h-6 text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing"},Tt={class:"flex items-center justify-center w-6 h-6 bg-emerald-100 text-emerald-800 rounded-full text-xs font-bold"},Ft={class:"px-4 py-3"},Jt={class:"flex items-start"},Ut={class:"text-sm font-bold text-gray-900"},$t={class:"text-xs text-emerald-600 font-medium"},Gt={class:"text-xs text-gray-500"},Vt={class:"px-4 py-3"},qt={class:"space-y-1"},Lt={class:"text-xs font-medium text-gray-900"},Wt={class:"text-xs text-gray-600"},zt=["title"],Ht={class:"px-4 py-3"},Zt={class:"space-y-0.5"},Qt={class:"text-xs font-medium text-gray-900"},Xt={class:"text-xs text-gray-600"},Yt={class:"text-xs text-gray-500 truncate"},te={class:"px-4 py-3"},ee={class:"space-y-1"},se={class:"px-4 py-3"},ae={class:"flex items-center space-x-2"},re=["disabled","title"],le={class:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit Order"},oe={class:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded transition-colors",title:"View Details"},de={__name:"ProductionOrders",setup(ie){const x=f(null),m=f(null),b=f([]),S=f(!1),C=async()=>{S.value=!0;try{const l=await fetch("/api/legacy/batches");if(!l.ok)throw new Error("Failed to fetch orders");const e=await l.json();b.value=e.data||[]}catch(l){console.error("Error loading orders:",l)}finally{S.value=!1}},i=P(()=>{const l=b.value.find(e=>e.status==="OPEN");return l?{...l,customer:"N/A",boardsScanned:"N/A",bundlesCreated:"N/A",timeElapsed:"N/A",timeRemaining:"N/A",operator:"N/A"}:null}),y=P(()=>[]);f([{id:"ORD-20250701-002",priority:1,name:"Soft Maple - Special Order",species:"Soft Maple",dryStatus:"Green (Air Dried)",volume:"2,500 bf",date:"Jul 1, 2025",time:"1:00 PM - 6:00 PM",shift:"Afternoon Shift",status:"Scheduled",statusDetail:"Ready to Start",targetMix:"40% Prime, 35% Select, 25% #1 Common",canStart:!0},{id:"ORD-20250702-003",priority:2,name:"White Oak - Flooring Grade",species:"White Oak",dryStatus:"Kiln Dried (KD)",volume:"4,200 bf",date:"Jul 2, 2025",time:"9:00 AM - 5:00 PM",shift:"Morning + Afternoon Shift",status:"Scheduled",statusDetail:"Pending Setup",targetMix:"60% Select, 30% #1 Common, 10% #2 Common",canStart:!1},{id:"ORD-20250703-004",priority:3,name:"Cherry - Cabinet Grade",species:"Cherry",dryStatus:"Kiln Dried (KD)",volume:"1,800 bf",date:"Jul 3, 2025",time:"8:00 AM - 2:00 PM",shift:"Morning Shift",status:"Scheduled",statusDetail:"Ready to Start",targetMix:"50% FAS, 30% Select, 20% #1 Common",canStart:!0},{id:"ORD-20250703-005",priority:4,name:"Hard Maple - Premium",species:"Hard Maple",dryStatus:"Kiln Dried (KD)",volume:"3,600 bf",date:"Jul 3, 2025",time:"2:00 PM - 8:00 PM",shift:"Afternoon Shift",status:"Scheduled",statusDetail:"Pending Setup",targetMix:"45% FAS, 35% Select, 20% #1 Common",canStart:!1},{id:"ORD-20250704-006",priority:5,name:"Walnut - Select Grade",species:"Walnut",dryStatus:"Kiln Dried (KD)",volume:"1,200 bf",date:"Jul 4, 2025",time:"9:00 AM - 3:00 PM",shift:"Morning Shift",status:"Scheduled",statusDetail:"Material Pending",targetMix:"60% FAS, 25% Select, 15% #1 Common",canStart:!1}]);const A=(l,e,u)=>{x.value={order:e,index:u},l.dataTransfer.effectAllowed="move",l.target.style.opacity="0.5"},N=l=>{l.target.style.opacity="1",x.value=null,m.value=null},R=(l,e)=>{l.preventDefault(),l.dataTransfer.dropEffect="move",m.value=e},E=()=>{m.value=null},j=(l,e)=>{l.preventDefault(),!(!x.value||x.value.index===e)&&(console.log("Reordering not available with API data - would need backend support"),x.value=null,m.value=null)};return z(()=>{C()}),(l,e)=>{const u=H("router-link");return c(),v("div",tt,[t("div",et,[e[2]||(e[2]=t("h1",{class:"text-4xl font-extrabold text-gray-900"},"Production Orders",-1)),t("div",st,[s(_,{variant:"outline",asChild:""},{default:o(()=>[s(u,{to:"/orders/past"},{default:o(()=>e[0]||(e[0]=[n(" Past Orders ",-1)])),_:1,__:[0]})]),_:1}),s(_,null,{default:o(()=>[s(u,{to:"/orders/create",class:"flex items-center"},{default:o(()=>[s(d(I),{class:"w-4 h-4 mr-2"}),e[1]||(e[1]=n(" Schedule New Order ",-1))]),_:1,__:[1]})]),_:1})])]),t("div",at,[e[16]||(e[16]=t("h2",{class:"text-2xl font-bold text-emerald-600 mb-6"},"Running Order",-1)),i.value?(c(),p(D,{key:0,class:"border-2 border-emerald-300"},{default:o(()=>[s(w,{class:"p-8"},{default:o(()=>[t("div",rt,[t("div",null,[t("h3",lt,[s(d(B),{class:"w-5 h-5 text-emerald-600 mr-2"}),n(" "+a(i.value.name),1)]),t("div",ot,[e[3]||(e[3]=n(" ID: ",-1)),s(u,{to:`/orders/ORD-${i.value.id}`,class:"text-emerald-600 hover:text-emerald-800 hover:underline font-medium"},{default:o(()=>[n("ORD-"+a(i.value.id),1)]),_:1},8,["to"]),n(" | Customer: "+a(i.value.customer),1)])]),s(O,{variant:"secondary",class:"border"},{default:o(()=>e[4]||(e[4]=[n("Running",-1)])),_:1,__:[4]})]),t("div",dt,[t("div",null,[t("div",it,[s(d(T),{class:"w-4 h-4 text-gray-400 mr-2"}),e[5]||(e[5]=t("span",{class:"text-sm text-gray-600"},"Species",-1))]),t("div",nt,a(i.value.specie?.name||"Unknown")+" ("+a(i.value.dryStatus?.name||"Unknown")+")",1)]),t("div",null,[t("div",ct,[s(d(k),{class:"w-4 h-4 text-gray-400 mr-2"}),e[6]||(e[6]=t("span",{class:"text-sm text-gray-600"},"Scheduled Start",-1))]),t("div",ut,a(new Date(i.value.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric"}))+", N/A",1)]),t("div",null,[t("div",xt,[s(d(F),{class:"w-4 h-4 text-gray-400 mr-2"}),e[7]||(e[7]=t("span",{class:"text-sm text-gray-600"},"Operator",-1))]),t("div",mt,a(i.value.operator),1)])]),e[13]||(e[13]=t("div",{class:"text-sm text-gray-600 mb-4"},"Key Performance Indicators:",-1)),t("div",gt,[t("div",_t,[t("div",ft,[s(d(J),{class:"w-5 h-5 text-emerald-600"})]),t("div",null,[e[8]||(e[8]=t("div",{class:"text-sm text-gray-600"},"Boards Scanned",-1)),t("div",vt,a(i.value.boardsScanned),1)])]),t("div",pt,[t("div",yt,[s(d(U),{class:"w-5 h-5 text-emerald-600"})]),t("div",null,[e[9]||(e[9]=t("div",{class:"text-sm text-gray-600"},"Bundles Created",-1)),t("div",ht,a(i.value.bundlesCreated),1)])]),t("div",bt,[t("div",St,[s(d(k),{class:"w-5 h-5 text-gray-600"})]),t("div",null,[e[10]||(e[10]=t("div",{class:"text-sm text-gray-600"},"Time Elapsed",-1)),t("div",wt,a(i.value.timeElapsed),1)])]),t("div",Dt,[t("div",Ot,[s(d($),{class:"w-5 h-5 text-gray-600"})]),t("div",null,[e[11]||(e[11]=t("div",{class:"text-sm text-gray-600"},"Time Remaining (Est.)",-1)),t("div",kt,a(i.value.timeRemaining),1)])])]),t("div",Mt,[s(_,{variant:"outline"},{default:o(()=>[s(d(G),{class:"w-4 h-4 mr-2"}),e[12]||(e[12]=n(" Stop & Complete ",-1))]),_:1,__:[12]})])]),_:1,__:[13]})]),_:1})):(c(),p(D,{key:1,class:"border-2 border-gray-300"},{default:o(()=>[s(w,{class:"p-8 text-center"},{default:o(()=>[e[15]||(e[15]=t("p",{class:"text-gray-500"},"No order currently running",-1)),y.value.length>0?(c(),p(_,{key:0,class:"mt-4"},{default:o(()=>[s(d(M),{class:"w-4 h-4 mr-2"}),e[14]||(e[14]=n(" Start Next Order ",-1))]),_:1,__:[14]})):Z("",!0)]),_:1,__:[15]})]),_:1}))]),t("div",null,[t("div",Pt,[t("h2",Ct,"Upcoming Orders ("+a(y.value.length)+")",1),s(_,{variant:"outline",asChild:""},{default:o(()=>[s(u,{to:"/orders/all"},{default:o(()=>e[17]||(e[17]=[n(" Show All Orders ",-1)])),_:1,__:[17]})]),_:1})]),y.value.length===0?(c(),v("div",At,e[18]||(e[18]=[t("p",{class:"text-gray-500"},"No upcoming orders scheduled",-1),t("p",{class:"text-sm text-gray-400 mt-2"},"API does not provide scheduled order data",-1)]))):(c(),v("div",Nt,[t("table",Rt,[e[19]||(e[19]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500 w-16"},"Priority"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"},"Order Details"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"},"Species & Grade Mix"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"},"Schedule"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"},"Status"),t("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"},"Actions")])],-1)),t("tbody",Et,[(c(!0),v(Q,null,X(y.value,(r,h)=>(c(),v("tr",{key:r.id,class:Y(["hover:bg-emerald-50 transition-colors duration-150 cursor-move",m.value===h?"bg-emerald-100 border-t-2 border-emerald-500":""]),draggable:"true",onDragstart:g=>A(g,r,h),onDragend:N,onDragover:g=>R(g,h),onDragleave:E,onDrop:g=>j(g,h)},[t("td",Kt,[t("div",It,[t("div",Bt,[s(d(V),{class:"w-4 h-4"})]),t("div",Tt,a(r.priority),1)])]),t("td",Ft,[t("div",Jt,[t("div",null,[t("div",Ut,a(r.name),1),t("div",$t,[s(u,{to:`/orders/${r.id}`,class:"hover:text-emerald-800 hover:underline"},{default:o(()=>[n(a(r.id),1)]),_:2},1032,["to"])]),t("div",Gt,a(r.volume)+" • "+a(r.sorts?.length||0)+" sorts",1)])])]),t("td",Vt,[t("div",qt,[t("div",Lt,a(r.species),1),t("div",Wt,a(r.dryStatus),1),t("div",{class:"text-xs text-gray-500 truncate max-w-32",title:r.targetMix},a(r.targetMix),9,zt)])]),t("td",Ht,[t("div",Zt,[t("div",Qt,a(r.date),1),t("div",Xt,a(r.time),1),t("div",Yt,a(r.shift),1)])]),t("td",te,[t("div",ee,[s(O,{variant:"secondary",class:"border text-xs px-2 py-0.5"},{default:o(()=>[n(a(r.status),1)]),_:2},1024)])]),t("td",se,[t("div",ae,[t("button",{class:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!r.canStart,title:r.canStart?"Start Order":"Setup Required"},[r.canStart?(c(),p(d(M),{key:0,class:"w-3 h-3 mx-auto"})):(c(),p(d(q),{key:1,class:"w-3 h-3 mx-auto"}))],8,re),t("button",le,[s(d(L),{class:"w-3 h-3"})]),t("button",oe,[s(d(W),{class:"w-3 h-3"})])])])],42,jt))),128))])])]))])])}}},ge=K(de,[["__scopeId","data-v-cb285a3a"]]);export{ge as default};
