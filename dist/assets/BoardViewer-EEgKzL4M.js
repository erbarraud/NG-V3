import{d as M,D as B,x as U,u as g,k as h,A as S,y as N,m as z,j as F,V as At,W as Dt,r as C,X as We,Y as St,c as L,Z as ee,h as me,_ as Nt,$ as Ft,a0 as Ve,w as G,a as Ge,I as Z,o as Ce,a1 as Bt,a2 as Mt,a3 as Ke,a4 as Pt,a5 as Be,a6 as ze,a7 as le,F as ue,a8 as It,a9 as Tt,n as te,aa as Rt,ab as Ut,g as O,E as T,q as f,ac as Lt,z as D,B as q,J as ae,Q as jt,K as Me,M as Wt,L as Vt}from"./vendor-BU-5murH.js";import{c as ge,_ as He}from"./index-DMU_U8j6.js";import{X as Ye,w as Gt,a2 as Kt,z as Pe,a3 as zt,A as Ht,a4 as Yt,a5 as Xt,h as qt,a6 as Jt,F as Zt,a7 as Qt,u as en,a8 as tn,d as Ie,a9 as nn}from"./ui-C3Nfw3T3.js";function Xe(e,t){const o=typeof e=="string"&&!t?`${e}Context`:t,n=Symbol(o);return[a=>{const r=St(n,a);if(r||r===null)return r;throw new Error(`Injection \`${n.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},a=>(Rt(n,a),a)]}function qe(e,t,o){const n=o.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:o});t&&n.addEventListener(e,t,{once:!0}),n.dispatchEvent(a)}function Je(e){return It()?(Tt(e),!0):!1}function on(e){let t=!1,o;const n=Ke(!0);return(...a)=>(t||(o=n.run(()=>e(...a)),t=!0),o)}function an(e){let t=0,o,n;const a=()=>{t-=1,n&&t<=0&&(n.stop(),o=void 0,n=void 0)};return(...r)=>(t+=1,o||(n=Ke(!0),o=n.run(()=>e(...r))),Je(a),o)}function Oe(e){return typeof e=="function"?e():g(e)}const ne=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const sn=e=>typeof e<"u",rn=Object.prototype.toString,ln=e=>rn.call(e)==="[object Object]",un=()=>{},Te=dn();function dn(){var e,t;return ne&&((e=window?.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window?.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function cn(e){return ee()}function fn(e,t){cn()&&Pt(e,t)}function ye(e){var t;const o=Oe(e);return(t=o?.$el)!=null?t:o}const ke=ne?window:void 0;function Ze(...e){let t,o,n,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([o,n,a]=e,t=ke):[t,o,n,a]=e,!t)return un;Array.isArray(o)||(o=[o]),Array.isArray(n)||(n=[n]);const r=[],u=()=>{r.forEach(c=>c()),r.length=0},p=(c,l,y,b)=>(c.addEventListener(l,y,b),()=>c.removeEventListener(l,y,b)),m=G(()=>[ye(t),Oe(a)],([c,l])=>{if(u(),!c)return;const y=ln(l)?{...l}:l;r.push(...o.flatMap(b=>n.map(x=>p(c,b,x,y))))},{immediate:!0,flush:"post"}),v=()=>{m(),u()};return Je(v),v}function pn(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function vn(...e){let t,o,n={};e.length===3?(t=e[0],o=e[1],n=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,o=e[0],n=e[1]):(t=e[0],o=e[1]):(t=!0,o=e[0]);const{target:a=ke,eventName:r="keydown",passive:u=!1,dedupe:p=!1}=n,m=pn(t);return Ze(a,r,v=>{v.repeat&&Oe(p)||m(v)&&o(v)},u)}function mn(){const e=C(!1),t=ee();return t&&Ce(()=>{e.value=!0},t),e}function gn(e){return JSON.parse(JSON.stringify(e))}function yn(e,t,o,n={}){var a,r,u;const{clone:p=!1,passive:m=!1,eventName:v,deep:c=!1,defaultValue:l,shouldEmit:y}=n,b=ee(),x=o||b?.emit||((a=b?.$emit)==null?void 0:a.bind(b))||((u=(r=b?.proxy)==null?void 0:r.$emit)==null?void 0:u.bind(b?.proxy));let E=v;E=E||`update:${t.toString()}`;const _=A=>p?typeof p=="function"?p(A):gn(A):A,k=()=>sn(e[t])?_(e[t]):l,R=A=>{y?y(A)&&x(E,A):x(E,A)};if(m){const A=k(),j=C(A);let P=!1;return G(()=>e[t],W=>{P||(P=!0,j.value=_(W),te(()=>P=!1))}),G(j,W=>{!P&&(W!==e[t]||c)&&R(W)},{deep:c}),j}else return L({get(){return k()},set(A){R(A)}})}function Ae(e){return e?e.flatMap(t=>t.type===Z?Ae(t.children):[t]):[]}function Q(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function xe(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function $e(e,t,o=".",n){if(!xe(t))return $e(e,{},o);const a=Object.assign({},t);for(const r in e){if(r==="__proto__"||r==="constructor")continue;const u=e[r];u!=null&&(Array.isArray(u)&&Array.isArray(a[r])?a[r]=[...u,...a[r]]:xe(u)&&xe(a[r])?a[r]=$e(u,a[r],(o?`${o}.`:"")+r.toString()):a[r]=u)}return a}function bn(e){return(...t)=>t.reduce((o,n)=>$e(o,n,""),{})}const hn=bn(),[Qe,Da]=Xe("ConfigProvider");let xn="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",wn=(e=21)=>{let t="",o=e;for(;o--;)t+=xn[Math.random()*64|0];return t};const _n=an(()=>{const e=C(new Map),t=C(),o=L(()=>{for(const u of e.value.values())if(u)return!0;return!1}),n=Qe({scrollBody:C(!0)});let a=null;const r=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.body.style.removeProperty("--scrollbar-width"),document.body.style.overflow=t.value??"",Te&&a?.(),t.value=void 0};return G(o,(u,p)=>{var m;if(!ne)return;if(!u){p&&r();return}t.value===void 0&&(t.value=document.body.style.overflow);const v=window.innerWidth-document.documentElement.clientWidth,c={padding:v,margin:0},l=(m=n.scrollBody)!=null&&m.value?typeof n.scrollBody.value=="object"?hn({padding:n.scrollBody.value.padding===!0?v:n.scrollBody.value.padding,margin:n.scrollBody.value.margin===!0?v:n.scrollBody.value.margin},c):c:{padding:0,margin:0};v>0&&(document.body.style.paddingRight=typeof l.padding=="number"?`${l.padding}px`:String(l.padding),document.body.style.marginRight=typeof l.margin=="number"?`${l.margin}px`:String(l.margin),document.body.style.setProperty("--scrollbar-width",`${v}px`),document.body.style.overflow="hidden"),Te&&(a=Ze(document,"touchmove",y=>$n(y),{passive:!1})),te(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),e});function En(e){const t=wn(6),o=_n();o.value.set(t,e);const n=L({get:()=>o.value.get(t)??!1,set:a=>o.value.set(t,a)});return fn(()=>{o.value.delete(t)}),n}function et(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const o=e.parentNode;return!(o instanceof Element)||o.tagName==="BODY"?!1:et(o)}}function $n(e){const t=e||window.event,o=t.target;return o instanceof Element&&et(o)?!1:t.touches.length>1?!0:(t.preventDefault&&t.cancelable&&t.preventDefault(),!1)}function De(e){const t=ee(),o=t?.type.emits,n={};return o!=null&&o.length||console.warn(`No emitted event found. Please check component: ${t?.type.__name}`),o?.forEach(a=>{n[Nt(Ft(a))]=(...r)=>e(a,...r)}),n}function K(){const e=ee(),t=C(),o=L(()=>{var u,p;return["#text","#comment"].includes((u=t.value)==null?void 0:u.$el.nodeName)?(p=t.value)==null?void 0:p.$el.nextElementSibling:ye(t)}),n=Object.assign({},e.exposed),a={};for(const u in e.props)Object.defineProperty(a,u,{enumerable:!0,configurable:!0,get:()=>e.props[u]});if(Object.keys(n).length>0)for(const u in n)Object.defineProperty(a,u,{enumerable:!0,configurable:!0,get:()=>n[u]});Object.defineProperty(a,"$el",{enumerable:!0,configurable:!0,get:()=>e.vnode.el}),e.exposed=a;function r(u){t.value=u,u&&(Object.defineProperty(a,"$el",{enumerable:!0,configurable:!0,get:()=>u instanceof Element?u:u.$el}),e.exposed=a)}return{forwardRef:r,currentRef:t,currentElement:o}}var Cn=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},se=new WeakMap,ce=new WeakMap,fe={},we=0,tt=function(e){return e&&(e.host||tt(e.parentNode))},On=function(e,t){return t.map(function(o){if(e.contains(o))return o;var n=tt(o);return n&&e.contains(n)?n:(console.error("aria-hidden",o,"in not contained inside",e,". Doing nothing"),null)}).filter(function(o){return!!o})},kn=function(e,t,o,n){var a=On(t,Array.isArray(e)?e:[e]);fe[o]||(fe[o]=new WeakMap);var r=fe[o],u=[],p=new Set,m=new Set(a),v=function(l){!l||p.has(l)||(p.add(l),v(l.parentNode))};a.forEach(v);var c=function(l){!l||m.has(l)||Array.prototype.forEach.call(l.children,function(y){if(p.has(y))c(y);else try{var b=y.getAttribute(n),x=b!==null&&b!=="false",E=(se.get(y)||0)+1,_=(r.get(y)||0)+1;se.set(y,E),r.set(y,_),u.push(y),E===1&&x&&ce.set(y,!0),_===1&&y.setAttribute(o,"true"),x||y.setAttribute(n,"true")}catch(k){console.error("aria-hidden: cannot operate on ",y,k)}})};return c(t),p.clear(),we++,function(){u.forEach(function(l){var y=se.get(l)-1,b=r.get(l)-1;se.set(l,y),r.set(l,b),y||(ce.has(l)||l.removeAttribute(n),ce.delete(l)),b||l.removeAttribute(o)}),we--,we||(se=new WeakMap,se=new WeakMap,ce=new WeakMap,fe={})}},An=function(e,t,o){o===void 0&&(o="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=Cn(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),kn(n,a,o,"aria-hidden")):function(){return null}};function Dn(e){let t;G(()=>ye(e),o=>{o?t=An(o):t&&t()}),Ge(()=>{t&&t()})}let Sn=0;function Re(e,t="radix"){const o=Qe({useId:void 0});return Be?`${t}-${Be()}`:o.useId?`${t}-${o.useId()}`:`${t}-${++Sn}`}function Nn(e,t){const o=C(e);function n(a){return t[o.value][a]??o.value}return{state:o,dispatch:a=>{o.value=n(a)}}}const Fn=M({name:"PrimitiveSlot",inheritAttrs:!1,setup(e,{attrs:t,slots:o}){return()=>{var n,a;if(!o.default)return null;const r=Ae(o.default()),u=r.findIndex(c=>c.type!==Bt);if(u===-1)return r;const p=r[u];(n=p.props)==null||delete n.ref;const m=p.props?z(t,p.props):t;t.class&&(a=p.props)!=null&&a.class&&delete p.props.class;const v=Mt(p,m);for(const c in m)c.startsWith("on")&&(v.props||(v.props={}),v.props[c]=m[c]);return r.length===1?v:(r[u]=v,r)}}}),ie=M({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(e,{attrs:t,slots:o}){const n=e.asChild?"template":e.as;return typeof n=="string"&&["area","img","input"].includes(n)?()=>me(n,t):n!=="template"?()=>me(e.as,t,{default:o.default}):()=>me(Fn,t,{default:o.default})}});function Bn(e,t){var o;const n=C({}),a=C("none"),r=C(e),u=e.value?"mounted":"unmounted";let p;const m=((o=t.value)==null?void 0:o.ownerDocument.defaultView)??ke,{state:v,dispatch:c}=Nn(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),l=_=>{var k;if(ne){const R=new CustomEvent(_,{bubbles:!1,cancelable:!1});(k=t.value)==null||k.dispatchEvent(R)}};G(e,async(_,k)=>{var R;const A=k!==_;if(await te(),A){const j=a.value,P=pe(t.value);_?(c("MOUNT"),l("enter"),P==="none"&&l("after-enter")):P==="none"||((R=n.value)==null?void 0:R.display)==="none"?(c("UNMOUNT"),l("leave"),l("after-leave")):k&&j!==P?(c("ANIMATION_OUT"),l("leave")):(c("UNMOUNT"),l("after-leave"))}},{immediate:!0});const y=_=>{const k=pe(t.value),R=k.includes(_.animationName),A=v.value==="mounted"?"enter":"leave";if(_.target===t.value&&R&&(l(`after-${A}`),c("ANIMATION_END"),!r.value)){const j=t.value.style.animationFillMode;t.value.style.animationFillMode="forwards",p=m?.setTimeout(()=>{var P;((P=t.value)==null?void 0:P.style.animationFillMode)==="forwards"&&(t.value.style.animationFillMode=j)})}_.target===t.value&&k==="none"&&c("ANIMATION_END")},b=_=>{_.target===t.value&&(a.value=pe(t.value))},x=G(t,(_,k)=>{_?(n.value=getComputedStyle(_),_.addEventListener("animationstart",b),_.addEventListener("animationcancel",y),_.addEventListener("animationend",y)):(c("ANIMATION_END"),p!==void 0&&m?.clearTimeout(p),k?.removeEventListener("animationstart",b),k?.removeEventListener("animationcancel",y),k?.removeEventListener("animationend",y))},{immediate:!0}),E=G(v,()=>{const _=pe(t.value);a.value=v.value==="mounted"?_:"none"});return Ge(()=>{x(),E()}),{isPresent:L(()=>["mounted","unmountSuspended"].includes(v.value))}}function pe(e){return e&&getComputedStyle(e).animationName||"none"}const nt=M({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:o}){var n;const{present:a,forceMount:r}=We(e),u=C(),{isPresent:p}=Bn(a,u);o({present:p});let m=t.default({present:p});m=Ae(m||[]);const v=ee();if(m&&m?.length>1){const c=(n=v?.parent)!=null&&n.type.name?`<${v.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(l=>`  - ${l}`).join(`
`)].join(`
`))}return()=>r.value||a.value||p.value?me(t.default({present:p})[0],{ref:c=>{const l=ye(c);return typeof l?.hasAttribute>"u"||(l!=null&&l.hasAttribute("data-radix-popper-content-wrapper")?u.value=l.firstElementChild:u.value=l),l}}):null}}),[X,Mn]=Xe("DialogRoot"),Pn=M({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,default:void 0},defaultOpen:{type:Boolean,default:!1},modal:{type:Boolean,default:!0}},emits:["update:open"],setup(e,{emit:t}){const o=e,n=yn(o,"open",t,{defaultValue:o.defaultOpen,passive:o.open===void 0}),a=C(),r=C(),{modal:u}=We(o);return Mn({open:n,modal:u,openModal:()=>{n.value=!0},onOpenChange:p=>{n.value=p},onOpenToggle:()=>{n.value=!n.value},contentId:"",titleId:"",descriptionId:"",triggerElement:a,contentElement:r}),(p,m)=>F(p.$slots,"default",{open:g(n)})}}),In=M({__name:"Teleport",props:{to:{default:"body"},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(e){const t=mn();return(o,n)=>g(t)||o.forceMount?(h(),B(Ve,{key:0,to:o.to,disabled:o.disabled},[F(o.$slots,"default")],8,["to","disabled"])):U("",!0)}}),Tn=M({__name:"DialogPortal",props:{to:{},disabled:{type:Boolean},forceMount:{type:Boolean}},setup(e){const t=e;return(o,n)=>(h(),B(g(In),At(Dt(t)),{default:S(()=>[F(o.$slots,"default")]),_:3},16))}}),Rn="dismissableLayer.pointerDownOutside",Un="dismissableLayer.focusOutside";function ot(e,t){const o=t.closest("[data-dismissable-layer]"),n=e.dataset.dismissableLayer===""?e:e.querySelector("[data-dismissable-layer]"),a=Array.from(e.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(o&&n===o||a.indexOf(n)<a.indexOf(o))}function Ln(e,t){var o;const n=((o=t?.value)==null?void 0:o.ownerDocument)??globalThis?.document,a=C(!1),r=C(()=>{});return le(u=>{if(!ne)return;const p=async v=>{const c=v.target;if(t!=null&&t.value){if(ot(t.value,c)){a.value=!1;return}if(v.target&&!a.value){let l=function(){qe(Rn,e,y)};const y={originalEvent:v};v.pointerType==="touch"?(n.removeEventListener("click",r.value),r.value=l,n.addEventListener("click",r.value,{once:!0})):l()}else n.removeEventListener("click",r.value);a.value=!1}},m=window.setTimeout(()=>{n.addEventListener("pointerdown",p)},0);u(()=>{window.clearTimeout(m),n.removeEventListener("pointerdown",p),n.removeEventListener("click",r.value)})}),{onPointerDownCapture:()=>a.value=!0}}function jn(e,t){var o;const n=((o=t?.value)==null?void 0:o.ownerDocument)??globalThis?.document,a=C(!1);return le(r=>{if(!ne)return;const u=async p=>{t!=null&&t.value&&(await te(),!(!t.value||ot(t.value,p.target))&&p.target&&!a.value&&qe(Un,e,{originalEvent:p}))};n.addEventListener("focusin",u),r(()=>n.removeEventListener("focusin",u))}),{onFocusCapture:()=>a.value=!0,onBlurCapture:()=>a.value=!1}}const Y=ze({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wn=M({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(e,{emit:t}){const o=e,n=t,{forwardRef:a,currentElement:r}=K(),u=L(()=>{var x;return((x=r.value)==null?void 0:x.ownerDocument)??globalThis.document}),p=L(()=>Y.layersRoot),m=L(()=>r.value?Array.from(p.value).indexOf(r.value):-1),v=L(()=>Y.layersWithOutsidePointerEventsDisabled.size>0),c=L(()=>{const x=Array.from(p.value),[E]=[...Y.layersWithOutsidePointerEventsDisabled].slice(-1),_=x.indexOf(E);return m.value>=_}),l=Ln(async x=>{const E=[...Y.branches].some(_=>_?.contains(x.target));!c.value||E||(n("pointerDownOutside",x),n("interactOutside",x),await te(),x.defaultPrevented||n("dismiss"))},r),y=jn(x=>{[...Y.branches].some(E=>E?.contains(x.target))||(n("focusOutside",x),n("interactOutside",x),x.defaultPrevented||n("dismiss"))},r);vn("Escape",x=>{m.value===p.value.size-1&&(n("escapeKeyDown",x),x.defaultPrevented||n("dismiss"))});let b;return le(x=>{r.value&&(o.disableOutsidePointerEvents&&(Y.layersWithOutsidePointerEventsDisabled.size===0&&(b=u.value.body.style.pointerEvents,u.value.body.style.pointerEvents="none"),Y.layersWithOutsidePointerEventsDisabled.add(r.value)),p.value.add(r.value),x(()=>{o.disableOutsidePointerEvents&&Y.layersWithOutsidePointerEventsDisabled.size===1&&(u.value.body.style.pointerEvents=b)}))}),le(x=>{x(()=>{r.value&&(p.value.delete(r.value),Y.layersWithOutsidePointerEventsDisabled.delete(r.value))})}),(x,E)=>(h(),B(g(ie),{ref:g(a),"as-child":x.asChild,as:x.as,"data-dismissable-layer":"",style:ue({pointerEvents:v.value?c.value?"auto":"none":void 0}),onFocusCapture:g(y).onFocusCapture,onBlurCapture:g(y).onBlurCapture,onPointerdownCapture:g(l).onPointerDownCapture},{default:S(()=>[F(x.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),_e="focusScope.autoFocusOnMount",Ee="focusScope.autoFocusOnUnmount",Ue={bubbles:!1,cancelable:!0};function Vn(e,{select:t=!1}={}){const o=Q();for(const n of e)if(J(n,{select:t}),Q()!==o)return!0}function Gn(e){const t=at(e),o=Le(t,e),n=Le(t.reverse(),e);return[o,n]}function at(e){const t=[],o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)t.push(o.currentNode);return t}function Le(e,t){for(const o of e)if(!Kn(o,{upTo:t}))return o}function Kn(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function zn(e){return e instanceof HTMLInputElement&&"select"in e}function J(e,{select:t=!1}={}){if(e&&e.focus){const o=Q();e.focus({preventScroll:!0}),e!==o&&zn(e)&&t&&e.select()}}const Hn=on(()=>C([]));function Yn(){const e=Hn();return{add(t){const o=e.value[0];t!==o&&o?.pause(),e.value=je(e.value,t),e.value.unshift(t)},remove(t){var o;e.value=je(e.value,t),(o=e.value[0])==null||o.resume()}}}function je(e,t){const o=[...e],n=o.indexOf(t);return n!==-1&&o.splice(n,1),o}function Xn(e){return e.filter(t=>t.tagName!=="A")}const qn=M({__name:"FocusScope",props:{loop:{type:Boolean,default:!1},trapped:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const o=e,n=t,{currentRef:a,currentElement:r}=K(),u=C(null),p=Yn(),m=ze({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});le(c=>{if(!ne)return;const l=r.value;if(!o.trapped)return;function y(_){if(m.paused||!l)return;const k=_.target;l.contains(k)?u.value=k:J(u.value,{select:!0})}function b(_){if(m.paused||!l)return;const k=_.relatedTarget;k!==null&&(l.contains(k)||J(u.value,{select:!0}))}function x(_){l.contains(u.value)||J(l)}document.addEventListener("focusin",y),document.addEventListener("focusout",b);const E=new MutationObserver(x);l&&E.observe(l,{childList:!0,subtree:!0}),c(()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",b),E.disconnect()})}),le(async c=>{const l=r.value;if(await te(),!l)return;p.add(m);const y=Q();if(!l.contains(y)){const b=new CustomEvent(_e,Ue);l.addEventListener(_e,x=>n("mountAutoFocus",x)),l.dispatchEvent(b),b.defaultPrevented||(Vn(Xn(at(l)),{select:!0}),Q()===y&&J(l))}c(()=>{l.removeEventListener(_e,E=>n("mountAutoFocus",E));const b=new CustomEvent(Ee,Ue),x=E=>{n("unmountAutoFocus",E)};l.addEventListener(Ee,x),l.dispatchEvent(b),setTimeout(()=>{b.defaultPrevented||J(y??document.body,{select:!0}),l.removeEventListener(Ee,x),p.remove(m)},0)})});function v(c){if(!o.loop&&!o.trapped||m.paused)return;const l=c.key==="Tab"&&!c.altKey&&!c.ctrlKey&&!c.metaKey,y=Q();if(l&&y){const b=c.currentTarget,[x,E]=Gn(b);x&&E?!c.shiftKey&&y===E?(c.preventDefault(),o.loop&&J(x,{select:!0})):c.shiftKey&&y===x&&(c.preventDefault(),o.loop&&J(E,{select:!0})):y===b&&c.preventDefault()}}return(c,l)=>(h(),B(g(ie),{ref_key:"currentRef",ref:a,tabindex:"-1","as-child":c.asChild,as:c.as,onKeydown:v},{default:S(()=>[F(c.$slots,"default")]),_:3},8,["as-child","as"]))}});function Jn(e){return e?"open":"closed"}const st=M({__name:"DialogContentImpl",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const o=e,n=t,a=X(),{forwardRef:r,currentElement:u}=K();return a.titleId||(a.titleId=Re(void 0,"radix-vue-dialog-title")),a.descriptionId||(a.descriptionId=Re(void 0,"radix-vue-dialog-description")),Ce(()=>{a.contentElement=u,Q()!==document.body&&(a.triggerElement.value=Q())}),(p,m)=>(h(),B(g(qn),{"as-child":"",loop:"",trapped:o.trapFocus,onMountAutoFocus:m[5]||(m[5]=v=>n("openAutoFocus",v)),onUnmountAutoFocus:m[6]||(m[6]=v=>n("closeAutoFocus",v))},{default:S(()=>[N(g(Wn),z({id:g(a).contentId,ref:g(r),as:p.as,"as-child":p.asChild,"disable-outside-pointer-events":p.disableOutsidePointerEvents,role:"dialog","aria-describedby":g(a).descriptionId,"aria-labelledby":g(a).titleId,"data-state":g(Jn)(g(a).open.value)},p.$attrs,{onDismiss:m[0]||(m[0]=v=>g(a).onOpenChange(!1)),onEscapeKeyDown:m[1]||(m[1]=v=>n("escapeKeyDown",v)),onFocusOutside:m[2]||(m[2]=v=>n("focusOutside",v)),onInteractOutside:m[3]||(m[3]=v=>n("interactOutside",v)),onPointerDownOutside:m[4]||(m[4]=v=>n("pointerDownOutside",v))}),{default:S(()=>[F(p.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Zn=M({__name:"DialogContentModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const o=e,n=t,a=X(),r=De(n),{forwardRef:u,currentElement:p}=K();return Dn(p),(m,v)=>(h(),B(st,z({...o,...g(r)},{ref:g(u),"trap-focus":g(a).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:v[0]||(v[0]=c=>{var l;c.defaultPrevented||(c.preventDefault(),(l=g(a).triggerElement.value)==null||l.focus())}),onPointerDownOutside:v[1]||(v[1]=c=>{const l=c.detail.originalEvent,y=l.button===0&&l.ctrlKey===!0;(l.button===2||y)&&c.preventDefault()}),onFocusOutside:v[2]||(v[2]=c=>{c.preventDefault()})}),{default:S(()=>[F(m.$slots,"default")]),_:3},16,["trap-focus"]))}}),Qn=M({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const o=e,n=De(t);K();const a=X(),r=C(!1),u=C(!1);return(p,m)=>(h(),B(st,z({...o,...g(n)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:m[0]||(m[0]=v=>{var c;v.defaultPrevented||(r.value||(c=g(a).triggerElement.value)==null||c.focus(),v.preventDefault()),r.value=!1,u.value=!1}),onInteractOutside:m[1]||(m[1]=v=>{var c;v.defaultPrevented||(r.value=!0,v.detail.originalEvent.type==="pointerdown"&&(u.value=!0));const l=v.target;(c=g(a).triggerElement.value)!=null&&c.contains(l)&&v.preventDefault(),v.detail.originalEvent.type==="focusin"&&u.value&&v.preventDefault()})}),{default:S(()=>[F(p.$slots,"default")]),_:3},16))}}),eo=M({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const o=e,n=t,a=X(),r=De(n),{forwardRef:u}=K();return(p,m)=>(h(),B(g(nt),{present:p.forceMount||g(a).open.value},{default:S(()=>[g(a).modal.value?(h(),B(Zn,z({key:0,ref:g(u)},{...o,...g(r),...p.$attrs}),{default:S(()=>[F(p.$slots,"default")]),_:3},16)):(h(),B(Qn,z({key:1,ref:g(u)},{...o,...g(r),...p.$attrs}),{default:S(()=>[F(p.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),to=M({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean},as:{}},setup(e){const t=X();return En(!0),K(),(o,n)=>(h(),B(g(ie),{as:o.as,"as-child":o.asChild,"data-state":g(t).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:S(()=>[F(o.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),no=M({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{}},setup(e){const t=X(),{forwardRef:o}=K();return(n,a)=>{var r;return(r=g(t))!=null&&r.modal.value?(h(),B(g(nt),{key:0,present:n.forceMount||g(t).open.value},{default:S(()=>[N(to,z(n.$attrs,{ref:g(o),as:n.as,"as-child":n.asChild}),{default:S(()=>[F(n.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):U("",!0)}}}),oo=M({__name:"DialogClose",props:{asChild:{type:Boolean},as:{default:"button"}},setup(e){const t=e;K();const o=X();return(n,a)=>(h(),B(g(ie),z(t,{type:n.as==="button"?"button":void 0,onClick:a[0]||(a[0]=r=>g(o).onOpenChange(!1))}),{default:S(()=>[F(n.$slots,"default")]),_:3},16,["type"]))}}),ao=M({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{default:"h2"}},setup(e){const t=e,o=X();return K(),(n,a)=>(h(),B(g(ie),z(t,{id:g(o).titleId}),{default:S(()=>[F(n.$slots,"default")]),_:3},16,["id"]))}}),so=M({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{default:"p"}},setup(e){const t=e;K();const o=X();return(n,a)=>(h(),B(g(ie),z(t,{id:g(o).descriptionId}),{default:S(()=>[F(n.$slots,"default")]),_:3},16,["id"]))}});function ro(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}ro();typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const lo=e=>typeof e<"u";function io(e){return JSON.parse(JSON.stringify(e))}function uo(e,t,o,n={}){var a,r,u;const{clone:p=!1,passive:m=!1,eventName:v,deep:c=!1,defaultValue:l,shouldEmit:y}=n,b=ee(),x=o||b?.emit||((a=b?.$emit)==null?void 0:a.bind(b))||((u=(r=b?.proxy)==null?void 0:r.$emit)==null?void 0:u.bind(b?.proxy));let E=v;E=E||`update:${t.toString()}`;const _=A=>p?typeof p=="function"?p(A):io(A):A,k=()=>lo(e[t])?_(e[t]):l,R=A=>{y?y(A)&&x(E,A):x(E,A)};if(m){const A=k(),j=C(A);let P=!1;return G(()=>e[t],W=>{P||(P=!0,j.value=_(W),te(()=>P=!1))}),G(j,W=>{!P&&(W!==e[t]||c)&&R(W)},{deep:c}),j}else return L({get(){return k()},set(A){R(A)}})}const co=M({__name:"sheet",props:{open:{type:Boolean},defaultOpen:{type:Boolean}},emits:["update:open"],setup(e,{emit:t}){const o=e,a=uo(o,"open",t,{defaultValue:o.defaultOpen??!1,passive:o.open===void 0});return(r,u)=>(h(),B(g(Pn),{open:g(a),"onUpdate:open":u[0]||(u[0]=p=>Ut(a)?a.value=p:null)},{default:S(()=>[N(g(Tn),null,{default:S(()=>[F(r.$slots,"default")]),_:3})]),_:3},8,["open"]))}}),fo={class:"mx-auto w-full max-w-2xl"},po=M({__name:"sheet-content",props:{class:{},side:{default:"right"}},setup(e){const t=e,o={top:"inset-x-0 top-0 border-b",bottom:"inset-x-0 bottom-0 border-t",left:"inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm"};return(n,a)=>(h(),O(Z,null,[N(g(no),{class:"fixed inset-0 z-50 bg-black/80 sheet-overlay"}),N(g(eo),{class:T(g(ge)("fixed z-50 gap-4 bg-white p-6 shadow-lg sheet-content",o[t.side],`sheet-${t.side}`,t.class))},{default:S(()=>[f("div",fo,[F(n.$slots,"default",{},void 0,!0)]),N(g(oo),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:pointer-events-none"},{default:S(()=>[N(g(Ye),{class:"h-4 w-4"}),a[0]||(a[0]=f("span",{class:"sr-only"},"Close",-1))]),_:1,__:[0]})]),_:3},8,["class"])],64))}}),vo=He(po,[["__scopeId","data-v-a9241584"]]),mo=M({__name:"sheet-header",props:{class:{}},setup(e){const t=e;return(o,n)=>(h(),O("div",{class:T(g(ge)("flex flex-col space-y-2 text-center sm:text-left",t.class))},[F(o.$slots,"default")],2))}}),go=M({__name:"sheet-title",props:{class:{}},setup(e){const t=e;return(o,n)=>(h(),B(g(ao),{class:T(g(ge)("text-lg font-semibold text-gray-900",t.class))},{default:S(()=>[F(o.$slots,"default")]),_:3},8,["class"]))}}),yo=M({__name:"sheet-description",props:{class:{}},setup(e){const t=e;return(o,n)=>(h(),B(g(so),{class:T(g(ge)("text-sm text-gray-500",t.class))},{default:S(()=>[F(o.$slots,"default")]),_:3},8,["class"]))}}),bo={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4"},ho={class:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},xo={__name:"dialog",props:{open:{type:Boolean,default:!1}},emits:["update:open"],setup(e){return(t,o)=>(h(),B(Ve,{to:"body"},[N(Lt,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:S(()=>[e.open?(h(),O("div",bo,[f("div",{class:"fixed inset-0 bg-black/50",onClick:o[0]||(o[0]=n=>t.$emit("update:open",!1))}),f("div",ho,[F(t.$slots,"default")])])):U("",!0)]),_:3})]))}},wo={class:"board-viewer"},_o={class:"bg-white border-b border-gray-200 px-6 py-4"},Eo={class:"flex items-center justify-between"},$o={class:"flex items-center gap-6"},Co={class:"text-2xl font-bold text-gray-900"},Oo={class:"text-sm text-gray-500 mt-1"},ko={class:"flex flex-col gap-1"},Ao={class:"flex items-center gap-2 text-gray-700"},Do={class:"font-medium"},So={class:"flex items-center gap-2 text-gray-700"},No={class:"font-medium"},Fo={class:"flex items-center gap-6 text-right"},Bo={class:"flex items-center gap-2"},Mo={class:"text-xl font-bold text-gray-900"},Po={key:0,class:"flex items-center gap-1 px-2 py-1 bg-yellow-100 rounded-full"},Io={class:"text-xs text-gray-400 mt-2"},To={class:"bg-gray-50 border-b border-gray-200 px-6 py-3"},Ro={class:"flex items-center gap-2"},Uo={key:0,class:"px-6 py-4 bg-gray-50"},Lo={class:"grid grid-cols-8 gap-3"},jo={class:"flex items-center gap-1 mb-1"},Wo={class:"text-xs text-gray-500"},Vo={class:"px-6 py-4"},Go={key:0},Ko={key:0,class:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-lg"},zo={class:"text-sm text-blue-700"},Ho={class:"flex items-center gap-2 mb-2"},Yo={class:"text-md font-medium text-gray-700"},Xo={class:"text-sm text-gray-500"},qo={key:0,class:"px-2 py-0.5 bg-emerald-100 text-emerald-700 text-xs font-medium rounded-full"},Jo=["data-fallback-url","onMousemove","onMouseenter"],Zo=["src","alt"],Qo={key:0,class:"flex items-center gap-2 mt-2 flex-wrap"},ea=["onClick"],ta={key:0,class:"ml-1 font-semibold"},na={key:1,class:"ml-1"},oa={key:1,class:"text-xs text-gray-500 mt-2"},aa={key:1,class:"text-center py-8 text-gray-500"},sa={class:"mt-6 space-y-4"},ra={key:0},la={class:"flex justify-between items-start mb-2"},ia={key:0,class:"space-y-2"},ua={class:"list-disc list-inside space-y-1"},da={key:1,class:"text-sm text-green-600"},ca={key:1,class:"text-center py-8 text-gray-500"},fa={class:"p-6"},pa={class:"flex items-center justify-between mb-4"},va={class:"mb-4"},ma={class:"text-sm text-gray-600"},ga={class:"mb-6"},ya={class:"max-h-60 overflow-y-auto space-y-2"},ba={class:"flex justify-between items-start mb-1"},ha={class:"font-medium"},xa={key:0,class:"text-xs text-gray-600 mt-1"},wa={class:"space-y-4"},_a={class:"flex justify-end gap-3 mt-6"},Ea=["disabled"],re=200,ve=1.2,$a={__name:"BoardViewer",props:{board:{type:Object,required:!0},showKpis:{type:Boolean,default:!0},availableGrades:{type:Array,default:()=>[]}},emits:["update:board","image-loaded","usable-area-toggled"],setup(e,{expose:t,emit:o}){const n=e,a=o,r=C(!1),u=C(null),p=C(!1),m=C(new Set),v=C(!1),c=C(!1),l=C(!1),y=C({reason:"",comment:""}),b=C(!1),x=C(!1),E=C({x:0,y:0}),_=C(null),k=C([]),R=C([]),A=L(()=>{if(!n.board?.grades)return[];const s=[...n.board.grades],i=s.find(d=>oe(d.id).toLowerCase().includes("rebut"));return i?.valid&&s.some(w=>w.id===i.id?!1:w.valid===!0)?s.map(w=>w.id===i.id?{...w,valid:!1,reasons:["Board passed other grades, so Rebut does not apply"]}:w):s}),j=L(()=>{if(!n.board)return[];let s="N/A";n.board.volume&&(typeof n.board.volume=="object"&&n.board.volume.value?s=`${parseFloat(n.board.volume.value).toFixed(3)} m³`:typeof n.board.volume=="number"&&(s=`${n.board.volume.toFixed(3)} m³`));const i=n.board.face1?.defects?.reduce((I,H)=>I+(H.defects?.length||0),0)||0,d=n.board.face2?.defects?.reduce((I,H)=>I+(H.defects?.length||0),0)||0,w=i+d,$=w>0,V=n.board.length&&n.board.width?lt({value:parseFloat(n.board.length.value||n.board.length)*parseFloat(n.board.width.value||n.board.width)/1e4}):"N/A";return[{label:"Length",value:be(n.board.length),icon:Gt,iconColor:"text-amber-600"},{label:"Width",value:be(n.board.width),icon:Kt,iconColor:"text-blue-600"},{label:"Thickness",value:be(n.board.thickness),icon:Pe,iconColor:"text-purple-600"},{label:"Surface",value:V,icon:Pe,iconColor:"text-indigo-600"},{label:"Volume",value:s,icon:zt,iconColor:"text-cyan-600"},{label:"Defects",value:w,icon:Ht,iconColor:$?"text-red-600":"text-gray-600",colorClass:$?"text-red-600":"text-gray-900"}]}),P=async()=>{if(n.board)try{console.log("Loading board images for board:",n.board.id);const s=`/api/legacy/ui/images/render/board/${n.board.id}/face1/original`,i=`/api/legacy/ui/images/render/board/${n.board.id}/face2/original`;if(r.value){const d=n.board.face1?.annotatedUrl,w=n.board.face2?.annotatedUrl,$=d?`/api/legacy/${d}`:`/api/legacy/ui/images/render/board/${n.board.id}/face1/reductions`,V=w?`/api/legacy/${w}`:`/api/legacy/ui/images/render/board/${n.board.id}/face2/reductions`;u.value=[{faceName:"Face 1",url:$,fallbackUrl:s,highResUrl:s},{faceName:"Face 2",url:V,fallbackUrl:i,highResUrl:i}]}else u.value=[{faceName:"Face 1",url:s,highResUrl:s},{faceName:"Face 2",url:i,highResUrl:i}];u.value.forEach(d=>{const w=new Image;w.src=d.highResUrl})}catch(s){console.error("Error loading board images:",s)}},W=async()=>{r.value=!r.value,a("usable-area-toggled",r.value),await P()},rt=s=>{console.error("Image failed to load:",s.target.src);const i=s.target.closest("[data-fallback-url]");i&&i.dataset.fallbackUrl?(console.log("Trying fallback URL:",i.dataset.fallbackUrl),s.target.src=i.dataset.fallbackUrl,delete i.dataset.fallbackUrl):s.target.src="/boardpic.png"},be=s=>{if(!s)return"N/A";if(typeof s=="object"&&s.value){const d=parseFloat(s.value),w=s.unit||"cm";return w==="cm"?`${d.toFixed(1)} cm`:w==="mm"?`${(d/10).toFixed(1)} cm`:`${d.toFixed(1)} ${w}`}return`${(s/10).toFixed(1)} cm`},lt=s=>s?typeof s=="object"&&s.value?`${parseFloat(s.value).toFixed(2)} m²`:typeof s=="number"?`${s.toFixed(2)} m²`:"N/A":"N/A",it=s=>s?new Date(s).toLocaleDateString():"N/A",de=s=>{if(s==null){if(n.board?.grades&&n.board.grades.length>0){const d=A.value||n.board.grades,w=d.find(I=>I.valid?!oe(I.id).toLowerCase().includes("rebut"):!1);if(w)return oe(w.id);if(d.find(I=>oe(I.id).toLowerCase().includes("rebut")&&I.valid)||d.some(I=>I.valid!==void 0))return"Rebut"}return"Ungraded"}return n.availableGrades.find(d=>d.id===s)?.name||`Grade ${s}`},oe=s=>{const i={575:"AW",576:"AR",577:"BW",578:"BR",579:"CW",580:"CR",581:"Rebut"};return s>100&&i[s]?i[s]:n.availableGrades.find(w=>w.id===s)?.name||`Grade ${s}`},Se=s=>s&&s.replace(/�|Ã¨/g,"è").replace(/Ã©/g,"é").replace(/Ã /g,"à").replace(/Ã¢/g,"â").replace(/Ã§/g,"ç").replace(/Ã´/g,"ô").replace(/Ã»/g,"û").replace(/Ã®/g,"î").replace(/Ãª/g,"ê").replace(/Ã¹/g,"ù"),ut=s=>{if(!s)return"Unknown";if(s.specie){if(typeof s.specie=="object"&&s.specie.name)return s.specie.name;if(typeof s.specie=="string")return s.specie}if(s.species){if(typeof s.species=="object"&&s.species.name)return s.species.name;if(typeof s.species=="string")return s.species}return"Unknown"},dt=s=>{if(!s)return"Unknown";if(s.dryStatus){if(typeof s.dryStatus=="object"&&s.dryStatus.name)return s.dryStatus.name;if(typeof s.dryStatus=="string")return s.dryStatus}return"Unknown"},he=s=>{if(!s)return"N/A";if(s.price!==void 0&&s.price!==null)return s.price.toFixed(2);if(s.value!==void 0&&s.value!==null)return s.value.toFixed(2);if(!s.gradeId)return"N/A";const i=850,d=s.volumeGraded?.value||s.volumeGraded||s.length*s.width*s.thickness/1e9;return(i*parseFloat(d)).toFixed(2)},Ne=s=>{if(!n.board)return[];const i=s===1?n.board.face1:n.board.face2;return i?.defects?i.defects.map(d=>({name:d.name,color:d.color,count:d.defects?d.defects.length:0,totalArea:d.defects?d.defects.reduce((w,$)=>w+($.geometricProperties?.area||0),0).toFixed(1):0})):[]},ct=s=>{const i=new Set(m.value);i.has(s)?i.delete(s):i.add(s),m.value=i,console.log("Selected defects:",Array.from(m.value))},ft=s=>m.value.has(s),Fe=()=>{const s=new Set;n.board?.face1?.defects&&n.board.face1.defects.forEach(i=>s.add(i.name)),n.board?.face2?.defects&&n.board.face2.defects.forEach(i=>s.add(i.name)),m.value=s},pt=()=>{m.value.size===0?Fe():m.value=new Set,console.log("Toggled all defects:",Array.from(m.value))},vt=()=>{if(y.value.reason){if(console.log("Submitting feedback:",{boardId:n.board?.id,reason:y.value.reason,comment:y.value.comment,grade:de(n.board?.gradeId)}),l.value=!0,c.value=!1,n.board?.id){const s=`board-feedback-${n.board.id}`;localStorage.setItem(s,JSON.stringify({submitted:!0,date:new Date().toISOString(),reason:y.value.reason}))}y.value={reason:"",comment:""}}},mt=()=>{b.value=!b.value,b.value||(x.value=!1)},gt=(s,i)=>{if(!b.value)return;_.value=i;const d=s.currentTarget.getBoundingClientRect();E.value={x:s.clientX-d.left,y:s.clientY-d.top}},yt=s=>{b.value&&(x.value=!0,_.value=s)},bt=()=>{x.value=!1,_.value=null},ht=L(()=>{const{x:s,y:i}=E.value,d=k.value[_.value];if(!d)return{};const w=d.getBoundingClientRect(),$=w.left+s,V=w.top+i;let I=$-re/2,H=V-re-20;return{left:`${I}px`,top:`${H}px`,width:`${re}px`,height:`${re}px`,backgroundColor:"#ffffff"}}),xt=s=>{const{x:i,y:d}=E.value,w=k.value[s],$=R.value[s],V=u.value?.[s];if(!w||!$||!V)return{};w.getBoundingClientRect();const I=$.getBoundingClientRect(),H=$.naturalWidth/I.width,wt=$.naturalHeight/I.height,_t=i*H,Et=d*wt,$t=-(_t*ve)+re/2,Ct=-(Et*ve)+re/2,Ot=$.naturalWidth*ve,kt=$.naturalHeight*ve;return{backgroundImage:`url(${V.highResUrl||$.src})`,backgroundSize:`${Ot}px ${kt}px`,backgroundPosition:`${$t}px ${Ct}px`,imageRendering:"crisp-edges"}};return G(()=>n.board,async s=>{if(s){Fe(),await P();const i=`board-feedback-${s.id}`,d=localStorage.getItem(i);if(d)try{const w=JSON.parse(d);l.value=w.submitted||!1}catch{l.value=!1}else l.value=!1}},{immediate:!0}),Ce(async()=>{n.board&&await P()}),t({toggleUsableArea:W,loadBoardImages:P,showUsableArea:r,showFeedbackModal:c}),(s,i)=>(h(),O("div",wo,[f("div",_o,[f("div",Eo,[f("div",$o,[f("div",null,[f("div",Co,"Board #"+D(e.board.id),1),f("div",Oo,"Order "+D(e.board.batch?.id||"N/A")+" - "+D(e.board.batch?.name||""),1)]),i[9]||(i[9]=f("div",{class:"h-12 w-px bg-gray-300"},null,-1)),f("div",ko,[f("div",Ao,[N(g(Yt),{class:"w-4 h-4 text-gray-500"}),f("span",Do,D(ut(e.board)),1)]),f("div",So,[N(g(Xt),{class:"w-4 h-4 text-gray-500"}),f("span",No,D(dt(e.board)),1)])])]),f("div",Fo,[f("div",null,[i[11]||(i[11]=f("div",{class:"text-sm text-gray-500"},"Grade",-1)),f("div",Bo,[f("div",Mo,D(de(e.board.gradeId)),1),l.value?(h(),O("div",Po,[N(g(qt),{class:"w-3 h-3 text-yellow-700"}),i[10]||(i[10]=f("span",{class:"text-xs font-medium text-yellow-700"},"Feedback sent",-1))])):U("",!0)])]),f("div",null,[i[12]||(i[12]=f("div",{class:"text-sm text-gray-500"},"Value",-1)),f("div",{class:T(["text-xl font-bold",he(e.board)==="N/A"?"text-gray-400":"text-green-600"])},D(he(e.board)==="N/A"?"N/A":`$${he(e.board)}`),3)])])]),f("div",Io," Scanned: "+D(it(e.board.createDate)),1)]),f("div",To,[f("div",Ro,[f("button",{onClick:W,class:T(["flex items-center px-3 py-1.5 text-sm font-medium bg-white border-2 rounded-md hover:bg-gray-50 transition-colors",r.value?"text-blue-600 border-blue-300":"text-gray-600 border-gray-300"])},[N(g(Jt),{class:"w-4 h-4 mr-2"}),q(" "+D(r.value?"Hide":"Show")+" Usable Area ",1)],2),e.board.grades&&e.board.grades.length>0?(h(),O("button",{key:0,onClick:i[0]||(i[0]=d=>p.value=!0),class:"flex items-center px-3 py-1.5 text-sm font-medium text-gray-600 bg-white border-2 border-gray-300 rounded-md hover:bg-gray-50 transition-colors"},[N(g(Zt),{class:"w-4 h-4 mr-2"}),i[13]||(i[13]=q(" See rejection rules ",-1))])):U("",!0),f("button",{onClick:i[1]||(i[1]=d=>v.value=!v.value),class:T(["flex items-center px-3 py-1.5 text-sm font-medium bg-white border-2 rounded-md hover:bg-gray-50 transition-colors",v.value?"text-orange-600 border-orange-300":"text-gray-600 border-gray-300"])},[v.value?(h(),B(g(Qt),{key:0,class:"w-4 h-4 mr-2"})):(h(),B(g(en),{key:1,class:"w-4 h-4 mr-2"})),q(" "+D(v.value?"Show":"Hide")+" minor defects ",1)],2),s.$slots["extended-content"]?(h(),O("button",{key:1,onClick:mt,class:T(["flex items-center px-3 py-1.5 text-sm font-medium bg-white border-2 rounded-md hover:bg-gray-50 transition-colors",b.value?"text-emerald-600 border-emerald-300":"text-gray-600 border-gray-300"])},[N(g(tn),{class:"w-4 h-4 mr-2"}),q(" "+D(b.value?"Disable Magnifier":"Enable Magnifier"),1)],2)):U("",!0),F(s.$slots,"actions",{},void 0,!0)])]),e.showKpis?(h(),O("div",Uo,[f("div",Lo,[(h(!0),O(Z,null,ae(j.value,d=>(h(),O("div",{key:d.label,class:"bg-white rounded-lg shadow-sm p-3"},[f("div",jo,[(h(),B(jt(d.icon),{class:T(["w-4 h-4",d.iconColor])},null,8,["class"])),f("div",Wo,D(d.label),1)]),f("div",{class:T(["text-lg font-semibold",d.colorClass||"text-gray-900"])},D(d.value),3)]))),128))])])):U("",!0),f("div",Vo,[u.value&&u.value.length>0?(h(),O("div",Go,[r.value?(h(),O("div",Ko,[f("p",zo,[N(g(Ie),{class:"inline w-4 h-4 mr-1"}),i[14]||(i[14]=q(" Showing usable areas (clear cuttings) - Toggle off to see original images ",-1))])])):U("",!0),(h(!0),O(Z,null,ae(u.value,(d,w)=>(h(),O("div",{key:w,class:"mb-4"},[f("div",Ho,[f("h5",Yo,D(d.faceName),1),f("span",Xo," Shot #"+D(w===0?e.board.face1?.shotId||"-":e.board.face2?.shotId||"-"),1),e.board.gradingFace===w+1||w===0&&!e.board.gradingFace?(h(),O("span",qo," Grading Face ")):U("",!0)]),f("div",{class:"border border-gray-300 bg-gray-100 relative","data-fallback-url":d.fallbackUrl,ref_for:!0,ref:$=>k.value[w]=$,onMousemove:$=>gt($,w),onMouseenter:()=>yt(w),onMouseleave:bt,style:ue({cursor:b.value?"crosshair":"default"})},[f("img",{src:d.url,alt:`Board ${e.board.id} - ${d.faceName}`,class:"w-full h-auto",ref_for:!0,ref:$=>R.value[w]=$,onError:rt},null,40,Zo),x.value&&b.value&&_.value===w?(h(),O("div",{key:0,style:ue(ht.value),class:"fixed pointer-events-none border-2 border-white shadow-lg rounded-lg overflow-hidden z-50"},[f("div",{style:ue(xt(w)),class:"w-full h-full bg-no-repeat"},null,4)],4)):U("",!0)],44,Jo),Ne(w+1).length>0?(h(),O("div",Qo,[i[15]||(i[15]=f("span",{class:"text-xs text-gray-600 font-medium mr-1"},"Defects:",-1)),(h(!0),O(Z,null,ae(Ne(w+1),($,V)=>(h(),O("button",{key:V,onClick:I=>ct($.name),class:T(["inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-full transition-all cursor-pointer border",ft($.name)?"bg-white border-gray-300 shadow-sm hover:shadow-md text-gray-800":"bg-gray-50 border-gray-200 opacity-50 hover:opacity-75 text-gray-500"])},[f("span",{class:"w-2 h-2 rounded-full mr-1.5 flex-shrink-0",style:ue({backgroundColor:$.color||"#DC2626"})},null,4),q(" "+D($.name)+" ",1),$.count>0?(h(),O("span",ta," ("+D($.count)+") ",1)):U("",!0),$.totalArea>0?(h(),O("span",na,D($.totalArea)+" cm² ",1)):U("",!0)],10,ea))),128)),i[16]||(i[16]=f("span",{class:"text-gray-400 mx-1"},"•",-1)),f("button",{onClick:i[2]||(i[2]=$=>pt()),class:"text-xs text-blue-600 hover:text-blue-700 font-medium"},D(m.value.size===0?"Select All":"Clear All"),1)])):(h(),O("div",oa," Clean face - No defects "))]))),128))])):(h(),O("div",aa,[N(g(nn),{class:"w-12 h-12 mx-auto mb-2 text-gray-300"}),i[17]||(i[17]=f("p",null,"No images available",-1))]))]),F(s.$slots,"extended-content",{},void 0,!0),N(co,{open:p.value,"onUpdate:open":i[3]||(i[3]=d=>p.value=d)},{default:S(()=>[N(vo,{class:"w-[400px] sm:w-[540px]"},{default:S(()=>[N(mo,null,{default:S(()=>[N(go,null,{default:S(()=>i[18]||(i[18]=[q("Grade Validation Results",-1)])),_:1,__:[18]}),N(yo,null,{default:S(()=>[q(" Board #"+D(e.board?.id)+" - Current Grade: "+D(de(e.board?.gradeId)),1)]),_:1})]),_:1}),f("div",sa,[A.value&&A.value.length>0?(h(),O("div",ra,[(h(!0),O(Z,null,ae(A.value,d=>(h(),O("div",{key:d.id,class:T(["rounded-lg p-4 border-2 transition-all",d.valid?"bg-green-50 border-green-300":"bg-red-50 border-red-300"])},[f("div",la,[f("h4",{class:T(["font-semibold text-lg",d.valid?"text-green-900":"text-red-900"])},D(oe(d.id)),3),f("span",{class:T(["px-3 py-1 text-xs font-medium rounded-full",d.valid?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},D(d.valid?"✓ Valid":"✗ Failed"),3)]),!d.valid&&d.reasons&&d.reasons.length>0?(h(),O("div",ia,[i[19]||(i[19]=f("div",{class:"text-sm font-medium text-red-700"},"Rejection Reasons:",-1)),f("ul",ua,[(h(!0),O(Z,null,ae(d.reasons,(w,$)=>(h(),O("li",{key:$,class:"text-sm text-red-600"},D(Se(w)),1))),128))])])):d.valid?(h(),O("div",da," Board meets all requirements for this grade ")):U("",!0)],2))),128))])):(h(),O("div",ca,[N(g(Ie),{class:"w-12 h-12 mx-auto mb-2 text-gray-300"}),i[20]||(i[20]=f("p",null,"No grade validation data available",-1))]))])]),_:1})]),_:1},8,["open"]),N(xo,{open:c.value,"onUpdate:open":i[8]||(i[8]=d=>c.value=d)},{default:S(()=>[f("div",fa,[f("div",pa,[i[21]||(i[21]=f("h2",{class:"text-xl font-semibold text-gray-900"},"Disagree with Grading",-1)),f("button",{onClick:i[4]||(i[4]=d=>c.value=!1),class:"text-gray-400 hover:text-gray-600"},[N(g(Ye),{class:"w-5 h-5"})])]),f("div",va,[f("p",ma,"Board #"+D(e.board?.id)+" - Current Grade: "+D(de(e.board?.gradeId)),1)]),f("div",ga,[i[22]||(i[22]=f("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"Grade Evaluation Results:",-1)),f("div",ya,[(h(!0),O(Z,null,ae(A.value,d=>(h(),O("div",{key:d.id,class:T(["border rounded-lg p-3 text-sm",d.valid?"border-green-200 bg-green-50":"border-red-200 bg-red-50"])},[f("div",ba,[f("span",ha,D(oe(d.id)),1),f("span",{class:T(d.valid?"text-green-600":"text-red-600")},D(d.valid?"Passed":"Failed"),3)]),!d.valid&&d.reasons?.length>0?(h(),O("div",xa,D(Se(d.reasons[0])),1)):U("",!0)],2))),128))])]),f("div",wa,[f("div",null,[i[24]||(i[24]=f("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Why do you disagree with the grading? ",-1)),Me(f("select",{"onUpdate:modelValue":i[5]||(i[5]=d=>y.value.reason=d),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},i[23]||(i[23]=[f("option",{value:""},"Select a reason...",-1),f("option",{value:"missed_defect"},"Missed a defect",-1),f("option",{value:"wrong_defect"},"Incorrectly identified defect",-1),f("option",{value:"wrong_grade"},"Should be different grade",-1),f("option",{value:"measurement_error"},"Measurement error",-1),f("option",{value:"other"},"Other",-1)]),512),[[Wt,y.value.reason]])]),f("div",null,[i[25]||(i[25]=f("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Additional Comments ",-1)),Me(f("textarea",{"onUpdate:modelValue":i[6]||(i[6]=d=>y.value.comment=d),rows:"4",placeholder:"Please provide more details...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[Vt,y.value.comment]])])]),f("div",_a,[f("button",{onClick:i[7]||(i[7]=d=>c.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Cancel "),f("button",{onClick:vt,disabled:!y.value.reason,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"}," Submit Feedback ",8,Ea)])])]),_:1},8,["open"])]))}},Sa=He($a,[["__scopeId","data-v-f85a1b0c"]]);export{Sa as B};
