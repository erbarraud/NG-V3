import{r as o,P,c as p,o as $,g as l,q as t,z as u,D as M,x as S,y as a,A as m,B as c,u as v,K as J,L as O,U as q,I as Y,J as H,l as Q,k as r}from"./vendor-BU-5murH.js";import{B as W}from"./BoardViewer-EEgKzL4M.js";import{_ as X,a as _}from"./index-DMU_U8j6.js";import{a1 as Z,K as ee,j as te,Y as se,_ as ae,$ as oe}from"./ui-C3Nfw3T3.js";const re={class:"w-full px-4 sm:px-6 lg:px-8 py-6 bg-gray-50 min-h-screen"},ne={key:0,class:"flex justify-center items-center py-12"},le={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6 mb-6"},de={class:"text-red-700"},ie={key:2},ce={class:"flex items-center justify-between mb-6"},ue={class:"text-gray-600"},me={class:"flex items-center space-x-4"},ve={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6"},be={class:"flex items-center justify-between"},ge={class:"flex items-center space-x-4"},pe={class:"text-sm text-gray-600"},fe={class:"flex items-center space-x-2"},xe={class:"flex items-center px-3 py-1.5 text-sm font-medium text-gray-600 bg-white border-2 border-gray-300 rounded-md hover:bg-gray-50 transition-colors"},ye={class:"flex items-center px-3 py-1.5 text-sm font-medium text-gray-600 bg-white border-2 border-gray-300 rounded-md hover:bg-gray-50 transition-colors"},he={class:"border-t border-gray-200 px-6 py-4"},_e={key:0,class:"space-y-2"},we={class:"flex justify-between items-center"},Be={class:"font-medium text-green-900"},ke={class:"text-sm text-green-700"},Ie={key:1,class:"text-gray-500 text-center py-4"},Ce={__name:"BoardInspector",setup(De){const C=P(),D=Q(),f=o(parseInt(C.params.id)||1),w=o(null),A=o([]),B=o(!1),x=o(null),b=o(null),k=o(null),d=o([]),g=p(()=>d.value.indexOf(f.value)),V=p(()=>d.value.length),j=p(()=>g.value>0),N=p(()=>g.value<d.value.length-1),I=o([]),E=p(()=>I.value&&I.value.length>0),y=async s=>{B.value=!0,x.value=null;try{const e=await fetch("/api/legacy/boards");if(!e.ok)throw new Error("Failed to fetch boards");const h=((await e.json()).data||[]).find(K=>K.id===parseInt(s));if(!h)throw new Error(`Board with ID ${s} not found`);w.value=h,f.value=parseInt(s),C.params.id!==s.toString()&&D.replace({params:{id:s.toString()}})}catch(e){x.value=`Failed to load board: ${e.message}`,console.error("Error loading board:",e)}finally{B.value=!1}},F=async()=>{try{const s=await fetch("/api/legacy/grades");if(!s.ok)throw new Error("Failed to fetch grades");const e=await s.json();A.value=e.data||[]}catch(s){console.error("Error loading grades:",s)}},z=async()=>{try{const s=await fetch("/api/legacy/boards");if(!s.ok)throw new Error("Failed to fetch boards");const n=(await s.json()).data||[];d.value=n.map(i=>i.id).sort((i,h)=>i-h)}catch(s){console.error("Error loading board IDs:",s),d.value=Array.from({length:100},(e,n)=>n+1)}},L=()=>{if(j.value){const s=d.value[g.value-1];y(s)}},R=()=>{if(N.value){const s=d.value[g.value+1];y(s)}},T=()=>{b.value&&b.value>0&&y(b.value)},U=()=>{D.push("/board-finder")},G=s=>{console.log("Usable area toggled:",s)};return $(()=>{(async()=>{await Promise.all([F(),z(),y(f.value)])})()}),(s,e)=>(r(),l("div",re,[B.value?(r(),l("div",ne,e[2]||(e[2]=[t("div",{class:"text-center"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),t("p",{class:"text-gray-600"},"Loading board data...")],-1)]))):x.value?(r(),l("div",le,[t("p",de,u(x.value),1)])):(r(),l("div",ie,[t("div",ce,[t("div",null,[e[3]||(e[3]=t("h1",{class:"text-3xl font-bold text-gray-900 mb-1"},"Board Inspector",-1)),t("p",ue,"Detailed analysis of board #"+u(f.value),1)]),t("div",me,[a(_,{variant:"outline",class:"flex items-center",onClick:U},{default:m(()=>[a(v(Z),{class:"w-4 h-4 mr-2"}),e[4]||(e[4]=c(" View All Boards ",-1))]),_:1,__:[4]})])]),t("div",ve,[t("div",be,[t("div",ge,[a(_,{variant:"outline",size:"sm",onClick:L,disabled:!j.value},{default:m(()=>[a(v(ee),{class:"w-4 h-4"}),e[5]||(e[5]=c(" Previous ",-1))]),_:1,__:[5]},8,["disabled"]),t("span",pe," Board "+u(g.value+1)+" of "+u(V.value),1),a(_,{variant:"outline",size:"sm",onClick:R,disabled:!N.value},{default:m(()=>[e[6]||(e[6]=c(" Next ",-1)),a(v(te),{class:"w-4 h-4"})]),_:1,__:[6]},8,["disabled"])]),t("div",fe,[e[8]||(e[8]=t("label",{class:"text-sm text-gray-600"},"Jump to:",-1)),J(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>b.value=n),type:"number",placeholder:"Board ID",class:"w-24 px-2 py-1 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",onKeyup:q(T,["enter"])},null,544),[[O,b.value,void 0,{number:!0}]]),a(_,{size:"sm",onClick:T},{default:m(()=>e[7]||(e[7]=[c("Go",-1)])),_:1,__:[7]})])])]),w.value?(r(),M(W,{key:0,ref_key:"boardViewerRef",ref:k,board:w.value,"available-grades":A.value,"show-kpis":!0,onUsableAreaToggled:G},{actions:m(()=>[t("button",xe,[a(v(se),{class:"w-4 h-4 mr-2"}),e[9]||(e[9]=c(" Agree with NG AI ",-1))]),t("button",{onClick:e[1]||(e[1]=()=>{k.value&&(k.value.showFeedbackModal=!0)}),class:"flex items-center px-3 py-1.5 text-sm font-medium text-gray-600 bg-white border-2 border-gray-300 rounded-md hover:bg-gray-50 transition-colors"},[a(v(ae),{class:"w-4 h-4 mr-2"}),e[10]||(e[10]=c(" Disagree with NG AI ",-1))]),t("button",ye,[a(v(oe),{class:"w-4 h-4 mr-2"}),e[11]||(e[11]=c(" Add to Reference Bundle ",-1))])]),"extended-content":m(()=>[t("div",he,[e[12]||(e[12]=t("h3",{class:"text-lg font-semibold mb-4"},"Clear Cuttings",-1)),E.value?(r(),l("div",_e,[(r(!0),l(Y,null,H(I.value,(n,i)=>(r(),l("div",{key:i,class:"bg-green-50 rounded-lg p-3 border border-green-200"},[t("div",we,[t("span",Be,"Cutting #"+u(i+1),1),t("span",ke,u(n.dimensions||"N/A"),1)])]))),128))])):(r(),l("div",Ie," No clear cutting data available "))])]),_:1},8,["board","available-grades"])):S("",!0)]))]))}},Ve=X(Ce,[["__scopeId","data-v-aacafcc0"]]);export{Ve as default};
