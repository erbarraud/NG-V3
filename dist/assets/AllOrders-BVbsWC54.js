import{r as c,c as f,g as v,q as e,u as n,y as r,A as i,C as N,B as m,K as w,L as K,M as k,z as o,I as D,J as O,k as p,D as G}from"./vendor-BU-5murH.js";import{a as b}from"./index-DMU_U8j6.js";import{_ as J}from"./badge.vue_vue_type_script_setup_true_lang-D2wh-i_4.js";import{_ as S}from"./loading-skeleton-DRDYBVLD.js";import{u as E}from"./useAsyncState-tGbJMzr5.js";import{l as $,S as j,X as B,K as H,j as U,s as W,u as z,E as I}from"./ui-C3Nfw3T3.js";const q={class:"w-full px-4 sm:px-6 lg:px-8 py-6"},T={key:0,class:"space-y-6"},Q={class:"flex items-center justify-between"},X={class:"bg-white rounded-lg shadow p-6"},Y={key:1,class:"flex items-center justify-between mb-8"},Z={class:"bg-white rounded-lg shadow"},ee={class:"p-6 border-b border-gray-200"},te={class:"flex items-center justify-between mb-4"},se={class:"flex items-center space-x-4"},ae={class:"relative"},re={class:"text-sm text-gray-600"},oe={class:"overflow-x-auto"},le={class:"min-w-full divide-y divide-gray-200"},ne={class:"bg-white divide-y divide-gray-200"},ie={class:"px-6 py-4 whitespace-nowrap"},de={class:"px-6 py-4 whitespace-nowrap"},ue={class:"text-sm font-medium text-gray-900"},ce={class:"px-6 py-4 whitespace-nowrap"},me={class:"text-sm text-gray-900"},pe={class:"px-6 py-4 whitespace-nowrap"},ve={class:"text-sm text-gray-900"},xe={class:"text-xs text-gray-500"},ge={class:"px-6 py-4 whitespace-nowrap"},he={class:"text-sm text-gray-900"},ye={class:"px-6 py-4 whitespace-nowrap"},fe={class:"text-sm text-gray-900"},be={class:"px-6 py-4 whitespace-nowrap"},_e={class:"text-sm text-gray-900"},we={class:"text-xs text-gray-500"},Se={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Me={class:"flex items-center space-x-2"},ke={class:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"},De={class:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors"},Oe={class:"px-6 py-4 border-t border-gray-200"},Pe={class:"flex items-center justify-between"},Ae={class:"text-sm text-gray-600"},Ve={class:"flex items-center space-x-2"},Re={class:"flex items-center space-x-1"},je={__name:"AllOrders",setup(Fe){const d=c(""),x=c(""),g=c(""),l=c(1),h=c(10),_=c([]),P=async()=>{const a=await fetch("/api/legacy/batches");if(!a.ok)throw new Error("Failed to fetch orders");const t=await a.json();return _.value=t.data||[],_.value},C=f(()=>_.value.map(a=>({id:`ORD-${a.id}`,name:a.name,customer:"N/A",species:a.specie?.name||"N/A",dryStatus:a.dryStatus?.name||"N/A",volume:"N/A",date:a.startDate?new Date(a.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",time:"N/A",status:a.status||"N/A",sorts:[]})));c([{id:"ORD-20250701-001",name:"Red Oak - Prime Run",customer:"Johnson Lumber Co.",species:"Red Oak",dryStatus:"Kiln Dried (KD)",volume:"3,200 bf",date:"Jul 1, 2025",time:"8:00 AM - 12:00 PM",status:"Running",sorts:[{name:"Premium Oak",targetVolume:1800},{name:"Standard Oak",targetVolume:1400}]},{id:"ORD-20250701-002",name:"Soft Maple - Special Order",customer:"Artisan Furniture",species:"Soft Maple",dryStatus:"Green (Air Dried)",volume:"2,500 bf",date:"Jul 1, 2025",time:"1:00 PM - 6:00 PM",status:"Scheduled",sorts:[{name:"Furniture Grade",targetVolume:2500}]},{id:"ORD-20250702-003",name:"White Oak - Flooring Grade",customer:"Flooring Inc.",species:"White Oak",dryStatus:"Kiln Dried (KD)",volume:"4,200 bf",date:"Jul 2, 2025",time:"9:00 AM - 5:00 PM",status:"Scheduled",sorts:[{name:"Flooring Premium",targetVolume:2800},{name:"Flooring Standard",targetVolume:1400}]},{id:"ORD-20250630-004",name:"Cherry - Cabinet Grade",customer:"Cabinet Masters",species:"Cherry",dryStatus:"Kiln Dried (KD)",volume:"1,800 bf",date:"Jun 30, 2025",time:"8:00 AM - 2:00 PM",status:"Completed",sorts:[{name:"Cabinet Grade",targetVolume:1800}]},{id:"ORD-20250629-005",name:"Hard Maple - Premium",customer:"Premium Hardwoods",species:"Hard Maple",dryStatus:"Kiln Dried (KD)",volume:"3,600 bf",date:"Jun 29, 2025",time:"7:00 AM - 4:00 PM",status:"Completed",sorts:[{name:"Premium Maple",targetVolume:2200},{name:"Standard Maple",targetVolume:1400}]},{id:"ORD-20250628-006",name:"Walnut - Select Grade",customer:"Luxury Millwork",species:"Walnut",dryStatus:"Kiln Dried (KD)",volume:"1,200 bf",date:"Jun 28, 2025",time:"10:00 AM - 3:00 PM",status:"Completed",sorts:[{name:"Select Walnut",targetVolume:1200}]},{id:"ORD-20250703-007",name:"Red Oak - Construction Grade",customer:"BuildCorp",species:"Red Oak",dryStatus:"Green (Air Dried)",volume:"5,000 bf",date:"Jul 3, 2025",time:"8:00 AM - 6:00 PM",status:"Scheduled",sorts:[{name:"Construction Grade",targetVolume:3e3},{name:"Utility Grade",targetVolume:2e3}]},{id:"ORD-20250627-008",name:"Soft Maple - Furniture Grade",customer:"Modern Furniture Co.",species:"Soft Maple",dryStatus:"Kiln Dried (KD)",volume:"2,800 bf",date:"Jun 27, 2025",time:"9:00 AM - 4:00 PM",status:"Cancelled",sorts:[{name:"Furniture Maple",targetVolume:2800}]}]);const y=f(()=>C.value.filter(a=>{const t=!d.value||a.name.toLowerCase().includes(d.value.toLowerCase())||a.id.toLowerCase().includes(d.value.toLowerCase())||a.customer.toLowerCase().includes(d.value.toLowerCase()),u=!x.value||a.status===x.value,s=!g.value||a.species===g.value;return t&&u&&s})),M=f(()=>Math.ceil(y.value.length/h.value)),A=f(()=>{const a=(l.value-1)*h.value,t=a+h.value;return y.value.slice(a,t)}),V=f(()=>{const a=[],t=Math.max(1,l.value-2),u=Math.min(M.value,l.value+2);for(let s=t;s<=u;s++)a.push(s);return a}),R=()=>{d.value="",x.value="",g.value="",l.value=1},F=a=>{switch(a){case"OPEN":return"default";case"CLOSED":return"secondary";default:return"outline"}},{isLoading:L}=E(P,null,{immediate:!0});return(a,t)=>{const u=N("router-link");return p(),v("div",q,[n(L)?(p(),v("div",T,[e("div",Q,[r(S,{variant:"text",rows:2,"container-class":"w-64"}),r(S,{variant:"text",rows:1,"container-class":"w-32"})]),e("div",X,[r(S,{variant:"table",rows:8})])])):(p(),v("div",Y,[t[6]||(t[6]=e("div",null,[e("h1",{class:"text-4xl font-extrabold text-gray-900"},"All Orders"),e("p",{class:"text-gray-600 mt-1"},"View and manage all production orders")],-1)),r(b,null,{default:i(()=>[r(u,{to:"/orders/create",class:"flex items-center"},{default:i(()=>[r(n($),{class:"w-4 h-4 mr-2"}),t[5]||(t[5]=m(" Schedule New Order ",-1))]),_:1,__:[5]})]),_:1})])),e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[e("div",ae,[r(n(j),{class:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),type:"text",placeholder:"Search orders...",class:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg w-80 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},null,512),[[K,d.value]])]),w(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),class:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},t[7]||(t[7]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"OPEN"},"Open",-1),e("option",{value:"CLOSED"},"Closed",-1)]),512),[[k,x.value]]),w(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),class:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},t[8]||(t[8]=[e("option",{value:""},"All Species",-1),e("option",{value:"Hêtre"},"Hêtre",-1)]),512),[[k,g.value]]),r(b,{variant:"outline",onClick:R},{default:i(()=>[r(n(B),{class:"w-4 h-4 mr-2"}),t[9]||(t[9]=m(" Clear Filters ",-1))]),_:1,__:[9]})]),e("div",re," Showing "+o(y.value.length)+" of "+o(C.value.length)+" orders ",1)])]),e("div",oe,[e("table",le,[t[10]||(t[10]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Order ID "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Order Name "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Customer "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Species "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Volume "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Sorts "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Schedule "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Status "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Actions ")])],-1)),e("tbody",ne,[(p(!0),v(D,null,O(A.value,s=>(p(),v("tr",{key:s.id,class:"hover:bg-emerald-50 transition-colors duration-150"},[e("td",ie,[r(u,{to:`/orders/${s.id}`,class:"text-sm font-medium text-emerald-600 hover:text-emerald-800 hover:underline"},{default:i(()=>[m(o(s.id),1)]),_:2},1032,["to"])]),e("td",de,[e("div",ue,o(s.name),1)]),e("td",ce,[e("div",me,o(s.customer),1)]),e("td",pe,[e("div",ve,o(s.species),1),e("div",xe,o(s.dryStatus),1)]),e("td",ge,[e("div",he,o(s.volume),1)]),e("td",ye,[e("div",fe,o(s.sorts?.length||0),1)]),e("td",be,[e("div",_e,o(s.date),1),e("div",we,o(s.time),1)]),e("td",Se,[r(J,{variant:F(s.status),class:"text-xs"},{default:i(()=>[m(o(s.status),1)]),_:2},1032,["variant"])]),e("td",Ce,[e("div",Me,[e("button",ke,[r(n(W),{class:"w-4 h-4"})]),r(u,{to:`/orders/${s.id}`,class:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors"},{default:i(()=>[r(n(z),{class:"w-4 h-4"})]),_:2},1032,["to"]),e("button",De,[r(n(I),{class:"w-4 h-4"})])])])]))),128))])])]),e("div",Oe,[e("div",Pe,[e("div",Ae," Showing "+o((l.value-1)*h.value+1)+" to "+o(Math.min(l.value*h.value,y.value.length))+" of "+o(y.value.length)+" results ",1),e("div",Ve,[r(b,{variant:"outline",size:"sm",disabled:l.value===1,onClick:t[3]||(t[3]=s=>l.value--)},{default:i(()=>[r(n(H),{class:"w-4 h-4"}),t[11]||(t[11]=m(" Previous ",-1))]),_:1,__:[11]},8,["disabled"]),e("div",Re,[(p(!0),v(D,null,O(V.value,s=>(p(),G(b,{key:s,variant:s===l.value?"default":"outline",size:"sm",class:"w-8 h-8",onClick:Le=>l.value=s},{default:i(()=>[m(o(s),1)]),_:2},1032,["variant","onClick"]))),128))]),r(b,{variant:"outline",size:"sm",disabled:l.value===M.value,onClick:t[4]||(t[4]=s=>l.value++)},{default:i(()=>[t[12]||(t[12]=m(" Next ",-1)),r(n(U),{class:"w-4 h-4"})]),_:1,__:[12]},8,["disabled"])])])])])])}}};export{je as default};
