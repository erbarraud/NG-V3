import{r as c,c as f,o as N,g as x,q as e,y as o,A as d,C as A,B as u,u as p,K as C,L as R,M as T,z as r,I as S,J as k,k as m,D as F}from"./vendor-BU-5murH.js";import{a as b}from"./index-DMU_U8j6.js";import{_ as E}from"./badge.vue_vue_type_script_setup_true_lang-D2wh-i_4.js";import{l as J,S as V,X as $,K as H,j,u as B,E as G}from"./ui-C3Nfw3T3.js";const W={class:"w-full px-4 sm:px-6 lg:px-8 py-6"},z={key:0,class:"flex justify-center items-center py-12"},I={key:1},U={class:"flex items-center justify-between mb-8"},Q={class:"bg-white rounded-lg shadow"},q={class:"p-6 border-b border-gray-200"},X={class:"flex items-center justify-between mb-4"},Y={class:"flex items-center space-x-4"},Z={class:"relative"},ee={class:"text-sm text-gray-600"},te={class:"overflow-x-auto"},se={class:"min-w-full divide-y divide-gray-200"},ae={class:"bg-white divide-y divide-gray-200"},re={class:"px-6 py-4 whitespace-nowrap"},oe={class:"px-6 py-4 whitespace-nowrap"},le={class:"text-sm font-medium text-gray-900"},de={class:"px-6 py-4 whitespace-nowrap"},ie={class:"text-sm text-gray-900"},ne={class:"px-6 py-4 whitespace-nowrap"},ce={class:"text-sm text-gray-900"},ue={class:"text-xs text-gray-500"},pe={class:"px-6 py-4 whitespace-nowrap"},me={class:"text-sm text-gray-900"},xe={class:"px-6 py-4 whitespace-nowrap"},ve={class:"text-sm text-gray-900"},ye={class:"px-6 py-4 whitespace-nowrap"},he={class:"text-sm text-gray-900"},fe={class:"text-xs text-gray-500"},be={class:"px-6 py-4 whitespace-nowrap"},ge={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},_e={class:"flex items-center space-x-2"},we={class:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors"},De={class:"px-6 py-4 border-t border-gray-200"},Ce={class:"flex items-center justify-between"},Se={class:"text-sm text-gray-600"},ke={class:"flex items-center space-x-2"},Oe={class:"flex items-center space-x-1"},Re={__name:"PastOrders",setup(Me){const i=c(""),v=c(""),l=c(1),y=c(10),_=c([]),g=c(!1),O=async()=>{g.value=!0;try{const a=await fetch("/api/legacy/batches");if(!a.ok)throw new Error("Failed to fetch orders");const t=await a.json();_.value=t.data||[]}catch(a){console.error("Error loading orders:",a)}finally{g.value=!1}},w=f(()=>_.value.filter(t=>t.status==="CLOSED").map(t=>({id:`ORD-${t.id}`,name:t.name,customer:"N/A",species:t.specie?.name||"N/A",dryStatus:t.dryStatus?.name||"N/A",volume:"N/A",completedDate:t.startDate?new Date(t.startDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",completedTime:"N/A",status:t.status||"N/A",sorts:[]})));c([{id:"ORD-20250630-004",name:"Cherry - Cabinet Grade",customer:"Cabinet Masters",species:"Cherry",dryStatus:"Kiln Dried (KD)",volume:"1,800 bf",completedDate:"Jun 30, 2025",completedTime:"2:00 PM",status:"Completed"},{id:"ORD-20250629-005",name:"Hard Maple - Premium",customer:"Premium Hardwoods",species:"Hard Maple",dryStatus:"Kiln Dried (KD)",volume:"3,600 bf",completedDate:"Jun 29, 2025",completedTime:"4:00 PM",status:"Completed"},{id:"ORD-20250628-006",name:"Walnut - Select Grade",customer:"Luxury Millwork",species:"Walnut",dryStatus:"Kiln Dried (KD)",volume:"1,200 bf",completedDate:"Jun 28, 2025",completedTime:"3:00 PM",status:"Completed"},{id:"ORD-20250627-007",name:"Red Oak - Construction Grade",customer:"BuildCorp",species:"Red Oak",dryStatus:"Green (Air Dried)",volume:"5,000 bf",completedDate:"Jun 27, 2025",completedTime:"6:00 PM",status:"Completed"},{id:"ORD-20250626-008",name:"Soft Maple - Furniture Grade",customer:"Modern Furniture Co.",species:"Soft Maple",dryStatus:"Kiln Dried (KD)",volume:"2,800 bf",completedDate:"Jun 26, 2025",completedTime:"4:00 PM",status:"Cancelled"},{id:"ORD-20250625-009",name:"White Oak - Flooring Premium",customer:"Premium Flooring Inc.",species:"White Oak",dryStatus:"Kiln Dried (KD)",volume:"4,500 bf",completedDate:"Jun 25, 2025",completedTime:"5:30 PM",status:"Completed"},{id:"ORD-20250624-010",name:"Cherry - Furniture Grade",customer:"Artisan Furniture",species:"Cherry",dryStatus:"Kiln Dried (KD)",volume:"2,200 bf",completedDate:"Jun 24, 2025",completedTime:"3:45 PM",status:"Completed"},{id:"ORD-20250623-011",name:"Hard Maple - Select",customer:"Quality Woods Inc.",species:"Hard Maple",dryStatus:"Kiln Dried (KD)",volume:"3,100 bf",completedDate:"Jun 23, 2025",completedTime:"5:15 PM",status:"Completed"}]);const h=f(()=>w.value.filter(a=>{const t=!i.value||a.name.toLowerCase().includes(i.value.toLowerCase())||a.id.toLowerCase().includes(i.value.toLowerCase())||a.customer.toLowerCase().includes(i.value.toLowerCase()),n=!v.value||a.species===v.value;return t&&n})),D=f(()=>Math.ceil(h.value.length/y.value)),M=f(()=>{const a=(l.value-1)*y.value,t=a+y.value;return h.value.slice(a,t)}),P=f(()=>{const a=[],t=Math.max(1,l.value-2),n=Math.min(D.value,l.value+2);for(let s=t;s<=n;s++)a.push(s);return a}),K=()=>{i.value="",v.value="",l.value=1},L=a=>{switch(a){case"CLOSED":return"secondary";case"OPEN":return"default";default:return"outline"}};return N(()=>{O()}),(a,t)=>{const n=A("router-link");return m(),x("div",W,[g.value?(m(),x("div",z,t[4]||(t[4]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-600 mx-auto mb-4"}),e("p",{class:"text-gray-600"},"Loading past orders...")],-1)]))):(m(),x("div",I,[e("div",U,[t[6]||(t[6]=e("div",null,[e("h1",{class:"text-4xl font-extrabold text-gray-900"},"Past Orders"),e("p",{class:"text-gray-600 mt-1"},"View and manage completed and cancelled production orders")],-1)),o(b,null,{default:d(()=>[o(n,{to:"/orders/create",class:"flex items-center"},{default:d(()=>[o(p(J),{class:"w-4 h-4 mr-2"}),t[5]||(t[5]=u(" Schedule New Order ",-1))]),_:1,__:[5]})]),_:1})]),e("div",Q,[e("div",q,[e("div",X,[e("div",Y,[e("div",Z,[o(p(V),{class:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),C(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),type:"text",placeholder:"Search orders...",class:"pl-10 pr-3 py-2 border border-gray-300 rounded-lg w-80 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},null,512),[[R,i.value]])]),C(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),class:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500"},t[7]||(t[7]=[e("option",{value:""},"All Species",-1),e("option",{value:"Hêtre"},"Hêtre",-1)]),512),[[T,v.value]]),o(b,{variant:"outline",onClick:K},{default:d(()=>[o(p($),{class:"w-4 h-4 mr-2"}),t[8]||(t[8]=u(" Clear Filters ",-1))]),_:1,__:[8]})]),e("div",ee," Showing "+r(h.value.length)+" of "+r(w.value.length)+" orders ",1)])]),e("div",te,[e("table",se,[t[9]||(t[9]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Order ID "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Order Name "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Customer "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Species "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Volume "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Sorts "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Completed Date "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Status "),e("th",{class:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b-2 border-emerald-500"}," Actions ")])],-1)),e("tbody",ae,[(m(!0),x(S,null,k(M.value,s=>(m(),x("tr",{key:s.id,class:"hover:bg-emerald-50 transition-colors duration-150"},[e("td",re,[o(n,{to:`/orders/${s.id}`,class:"text-sm font-medium text-emerald-600 hover:text-emerald-800 hover:underline"},{default:d(()=>[u(r(s.id),1)]),_:2},1032,["to"])]),e("td",oe,[e("div",le,r(s.name),1)]),e("td",de,[e("div",ie,r(s.customer),1)]),e("td",ne,[e("div",ce,r(s.species),1),e("div",ue,r(s.dryStatus),1)]),e("td",pe,[e("div",me,r(s.volume),1)]),e("td",xe,[e("div",ve,r(s.sorts?.length||0),1)]),e("td",ye,[e("div",he,r(s.completedDate),1),e("div",fe,r(s.completedTime),1)]),e("td",be,[o(E,{variant:L(s.status),class:"text-xs"},{default:d(()=>[u(r(s.status),1)]),_:2},1032,["variant"])]),e("td",ge,[e("div",_e,[o(n,{to:`/orders/${s.id}`,class:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"},{default:d(()=>[o(p(B),{class:"w-4 h-4"})]),_:2},1032,["to"]),e("button",we,[o(p(G),{class:"w-4 h-4"})])])])]))),128))])])]),e("div",De,[e("div",Ce,[e("div",Se," Showing "+r((l.value-1)*y.value+1)+" to "+r(Math.min(l.value*y.value,h.value.length))+" of "+r(h.value.length)+" results ",1),e("div",ke,[o(b,{variant:"outline",size:"sm",disabled:l.value===1,onClick:t[2]||(t[2]=s=>l.value--)},{default:d(()=>[o(p(H),{class:"w-4 h-4"}),t[10]||(t[10]=u(" Previous ",-1))]),_:1,__:[10]},8,["disabled"]),e("div",Oe,[(m(!0),x(S,null,k(P.value,s=>(m(),F(b,{key:s,variant:s===l.value?"default":"outline",size:"sm",class:"w-8 h-8",onClick:Pe=>l.value=s},{default:d(()=>[u(r(s),1)]),_:2},1032,["variant","onClick"]))),128))]),o(b,{variant:"outline",size:"sm",disabled:l.value===D.value,onClick:t[3]||(t[3]=s=>l.value++)},{default:d(()=>[t[11]||(t[11]=u(" Next ",-1)),o(p(j),{class:"w-4 h-4"})]),_:1,__:[11]},8,["disabled"])])])])])]))])}}};export{Re as default};
